<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Callbacks - Anomaly Modding Book</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../src/custom.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="../meta/index.html"><strong aria-hidden="true">1.</strong> Meta</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../meta/contributing/index.html"><strong aria-hidden="true">1.1.</strong> Contributing to this book</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../getting-started/index.html"><strong aria-hidden="true">2.</strong> Mod Organizer</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../getting-started/installing-mo2.html"><strong aria-hidden="true">2.1.</strong> Installing MO2</a></li><li class="chapter-item expanded "><a href="../getting-started/addon-installers.html"><strong aria-hidden="true">2.2.</strong> Addon installers</a></li><li class="chapter-item expanded "><a href="../getting-started/package-naming.html"><strong aria-hidden="true">2.3.</strong> Package Naming for MO2</a></li><li class="chapter-item expanded "><a href="../getting-started/vs-code-game-files-setup.html"><strong aria-hidden="true">2.4.</strong> Configuring VSCode-like programs to handle game files</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Addons</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../addons/dltx.html"><strong aria-hidden="true">3.1.</strong> DLTX</a></li><li class="chapter-item expanded "><a href="../addons/dxml.html"><strong aria-hidden="true">3.2.</strong> DXML</a></li><li class="chapter-item expanded "><a href="../addons/mcm.html"><strong aria-hidden="true">3.3.</strong> MCM</a></li><li class="chapter-item expanded "><a href="../addons/pdb.html"><strong aria-hidden="true">3.4.</strong> PDB files</a></li><li class="chapter-item expanded "><a href="../addons/lua-unlocalizer.html"><strong aria-hidden="true">3.5.</strong> Lua Unlocalizer</a></li><li class="chapter-item expanded "><a href="../addons/useful-addons-scripts-utils.html"><strong aria-hidden="true">3.6.</strong> Useful addons, scripts and utils</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> Configs</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../configs/structure-of-files.html"><strong aria-hidden="true">4.1.</strong> Structure of Files</a></li><li class="chapter-item expanded "><a href="../configs/condlists.html"><strong aria-hidden="true">4.2.</strong> Condlists</a></li><li class="chapter-item expanded "><a href="../configs/inventory_icons.html"><strong aria-hidden="true">4.3.</strong> Inventory Icons</a></li><li class="chapter-item expanded "><a href="../configs/algoritm-of-logic.html"><strong aria-hidden="true">4.4.</strong> Algoritm of Logic</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../scripting/index.html"><strong aria-hidden="true">5.</strong> Scripting</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../scripting/codebase_introduction.html"><strong aria-hidden="true">5.1.</strong> Introduction to codebase</a></li><li class="chapter-item expanded "><a href="../scripting/codestyle.html"><strong aria-hidden="true">5.2.</strong> Codestyle</a></li><li class="chapter-item expanded "><a href="../scripting/wetting_hands.html"><strong aria-hidden="true">5.3.</strong> Wetting our hands</a></li><li class="chapter-item expanded "><a href="../scripting/server_and_game_objects.html"><strong aria-hidden="true">5.4.</strong> Server and game objects</a></li><li class="chapter-item expanded "><a href="../scripting/callbacks.html" class="active"><strong aria-hidden="true">5.5.</strong> Callbacks</a></li><li class="chapter-item expanded "><a href="../scripting/time_events.html"><strong aria-hidden="true">5.6.</strong> Time events</a></li><li class="chapter-item expanded "><a href="../scripting/monkey-patching.html"><strong aria-hidden="true">5.7.</strong> Monkey patching</a></li><li class="chapter-item expanded "><a href="../scripting/script_animations.html"><strong aria-hidden="true">5.8.</strong> Script Animations</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Modelling</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../blender/creating-model-in-blender.html"><strong aria-hidden="true">6.1.</strong> Creating model in Blender</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> Animating</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../blender/creating-hud-animation-in-blender.html"><strong aria-hidden="true">7.1.</strong> Creating an animation</a></li><li class="chapter-item expanded "><a href="../blender/creating-camera-animations.html"><strong aria-hidden="true">7.2.</strong> Creating animations for the camera</a></li><li class="chapter-item expanded "><a href="../blender/editing-existing-animations.html"><strong aria-hidden="true">7.3.</strong> Editing existing animations</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../texturing/index.html"><strong aria-hidden="true">8.</strong> Texturing</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../texturing/сreating-and-preparing-textures.html"><strong aria-hidden="true">8.1.</strong> Creating and preparing textures</a></li><li class="chapter-item expanded "><a href="../texturing/working-correctly-with-icon-atlases.html"><strong aria-hidden="true">8.2.</strong> Working correctly with icon atlases</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../mapping/index.html"><strong aria-hidden="true">9.</strong> Mapping</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../blender/creating-a-location-in-blender.html"><strong aria-hidden="true">9.1.</strong> Creating a location in Blender</a></li><li class="chapter-item expanded "><a href="../mapping/multimaterial-terrain.html"><strong aria-hidden="true">9.2.</strong> Multimaterial Terrain Guide</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../quests/index.html"><strong aria-hidden="true">10.</strong> Quests</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../quests/introduction.html"><strong aria-hidden="true">10.1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../quests/npc_creation.html"><strong aria-hidden="true">10.2.</strong> NPC Creation</a></li><li class="chapter-item expanded "><a href="../quests/task_guide.html"><strong aria-hidden="true">10.3.</strong> Task Creation</a></li><li class="chapter-item expanded "><a href="../quests/dialogues.html"><strong aria-hidden="true">10.4.</strong> Dialogue Creation</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../reference/index.html"><strong aria-hidden="true">11.</strong> Reference/General</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../terminology/terminology.html"><strong aria-hidden="true">11.1.</strong> Terminology</a></li><li class="chapter-item expanded "><a href="../main-folders-and-files/index.html"><strong aria-hidden="true">11.2.</strong> Main Folders And Files</a></li><li class="chapter-item expanded "><a href="../main-folders-and-files/file-formats/index.html"><strong aria-hidden="true">11.3.</strong> File Formats</a></li><li class="chapter-item expanded "><a href="../crash-list/crashes-list.html"><strong aria-hidden="true">11.4.</strong> Crash List</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/index.html"><strong aria-hidden="true">12.</strong> Reference/Configs</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../configs/items/weapons/w_(weapon).ltx.html"><strong aria-hidden="true">12.1.</strong> Weapon Configuration Parameters</a></li><li class="chapter-item expanded "><a href="../configs/items/weapons/weapon_ammo.ltx.html"><strong aria-hidden="true">12.2.</strong> Ammo Configuration Parameters</a></li><li class="chapter-item expanded "><a href="../configs/items/weapons/weapon_sounds.ltx.html"><strong aria-hidden="true">12.3.</strong> Weapon Sounds Parameters</a></li><li class="chapter-item expanded "><a href="../configs/items/outfits/o_(outfit).ltx.html"><strong aria-hidden="true">12.4.</strong> Oufits Configuration Parameters</a></li><li class="chapter-item expanded "><a href="../configs/creatures/m_(mutant).ltx.html"><strong aria-hidden="true">12.5.</strong> Mutants Configuration Parameters</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/index.html"><strong aria-hidden="true">13.</strong> Reference/Shaders</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../shaders/shaders-list/materials-list.html"><strong aria-hidden="true">13.1.</strong> Material Shaders List</a></li><li class="chapter-item expanded "><a href="../shaders/shaders-list/shaders-list.html"><strong aria-hidden="true">13.2.</strong> Shaders List</a></li><li class="chapter-item expanded "><a href="../shaders/shaders-list/compiler-shaders-list.html"><strong aria-hidden="true">13.3.</strong> Compiler Shaders List</a></li><li class="chapter-item expanded "><a href="../shaders/shaders-list/sound-envornment-list.html"><strong aria-hidden="true">13.4.</strong> Sound Envornment List</a></li></ol></li><li class="chapter-item expanded "><a href="../engine/index.html"><strong aria-hidden="true">14.</strong> Reference/Engine</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../engine/console-commands.html"><strong aria-hidden="true">14.1.</strong> Console commands</a></li><li class="chapter-item expanded "><a href="../engine/alife.html"><strong aria-hidden="true">14.2.</strong> A-Life (AI)</a></li><li class="chapter-item expanded "><a href="../engine/engine-classes.html"><strong aria-hidden="true">14.3.</strong> Engine Classes</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/index.html"><strong aria-hidden="true">15.</strong> Reference/Resources</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../resources/audio.html"><strong aria-hidden="true">15.1.</strong> Audio</a></li><li class="chapter-item expanded "><a href="../resources/models-objects-locations.html"><strong aria-hidden="true">15.2.</strong> Models</a></li><li class="chapter-item expanded "><a href="../resources/sdk-resources.html"><strong aria-hidden="true">15.3.</strong> SDK resources</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/index.html"><strong aria-hidden="true">16.</strong> Reference/Tools</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../modding-tools/modding-tools.html"><strong aria-hidden="true">16.1.</strong> Modding Tools List</a></li><li class="chapter-item expanded "><a href="../modding-tools/in-game-editors/index.html"><strong aria-hidden="true">16.2.</strong> In-Game Editors</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../modding-tools/in-game-editors/item-spawner.html"><strong aria-hidden="true">16.2.1.</strong> Item Spawner</a></li><li class="chapter-item expanded "><a href="../modding-tools/in-game-editors/lightning-editor.html"><strong aria-hidden="true">16.2.2.</strong> Lightning Editor</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.2.3.</strong> NPC Logic/Execute</div></li><li class="chapter-item expanded "><a href="../modding-tools/in-game-editors/object-spawner.html"><strong aria-hidden="true">16.2.4.</strong> Object Spawner</a></li><li class="chapter-item expanded "><a href="../modding-tools/in-game-editors/outfits-weapon-stats-editor.html"><strong aria-hidden="true">16.2.5.</strong> Outfits/Weapons Stats Editor</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.2.6.</strong> Pocket Workshop</div></li><li class="chapter-item expanded "><a href="../modding-tools/in-game-editors/weapon-hud-editor.html"><strong aria-hidden="true">16.2.7.</strong> Weapon HUD Editor</a></li><li class="chapter-item expanded "><a href="../modding-tools/in-game-editors/weather-editor.html"><strong aria-hidden="true">16.2.8.</strong> Weather Editor</a></li></ol></li><li class="chapter-item expanded "><a href="../modding-tools/ltx-support.html"><strong aria-hidden="true">16.3.</strong> Ltx Support</a></li><li class="chapter-item expanded "><a href="../sdk/index.html"><strong aria-hidden="true">16.4.</strong> SDK 0.7</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../sdk/interface.html"><strong aria-hidden="true">16.4.1.</strong> Interface</a></li><li class="chapter-item expanded "><a href="../sdk/actor-editor.html"><strong aria-hidden="true">16.4.2.</strong> Actor Editor</a></li><li class="chapter-item expanded "><a href="../sdk/image-editor.html"><strong aria-hidden="true">16.4.3.</strong> Image Editor</a></li><li class="chapter-item expanded "><a href="../sdk/level-editor.html"><strong aria-hidden="true">16.4.4.</strong> Level Editor</a></li><li class="chapter-item expanded "><a href="../sdk/shader-editor.html"><strong aria-hidden="true">16.4.5.</strong> Shader Editor</a></li><li class="chapter-item expanded "><a href="../sdk/sound-editor.html"><strong aria-hidden="true">16.4.6.</strong> Sound Editor</a></li><li class="chapter-item expanded "><a href="../sdk/postprocess-editor.html"><strong aria-hidden="true">16.4.7.</strong> Postprocess Editor</a></li><li class="chapter-item expanded "><a href="../sdk/particle-editor.html"><strong aria-hidden="true">16.4.8.</strong> Particle Editor (Not finished)</a></li></ol></li><li class="chapter-item expanded "><a href="../blender/blender-x-ray-addon-summary.html"><strong aria-hidden="true">16.5.</strong> Blender X-Ray Addon</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../blender/advanced-settings.html"><strong aria-hidden="true">16.5.1.</strong> Advanced settings</a></li><li class="chapter-item expanded "><a href="../blender/x-ray-addon-panels.html"><strong aria-hidden="true">16.5.2.</strong> Panels</a></li><li class="chapter-item expanded "><a href="../blender/x-ray-side-panels.html"><strong aria-hidden="true">16.5.3.</strong> Side Panel</a></li></ol></li><li class="chapter-item expanded "><a href="../modding-tools/stalker-studio.html"><strong aria-hidden="true">16.6.</strong> Stalker Studio</a></li><li class="chapter-item expanded "><a href="../modding-tools/thm-editor-by-i-love-kfc.html"><strong aria-hidden="true">16.7.</strong> THM Editor</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../modding-tools/thm-editor-by-valerok.html"><strong aria-hidden="true">16.7.1.</strong> Modified THM Editor</a></li></ol></li><li class="chapter-item expanded "><a href="../modding-tools/bump-generator.html"><strong aria-hidden="true">16.8.</strong> Bump Generator</a></li><li class="chapter-item expanded "><a href="../modding-tools/savandt.html"><strong aria-hidden="true">16.9.</strong> Sound Attribute Viewer And Tweaker</a></li><li class="chapter-item expanded "><a href="../modding-tools/upgrade-editor.html"><strong aria-hidden="true">16.10.</strong> Upgrade Editor</a></li><li class="chapter-item expanded "><a href="../modding-tools/omf-editor-by-valerok.html"><strong aria-hidden="true">16.11.</strong> Modified OMF Editor</a></li><li class="chapter-item expanded "><a href="../modding-tools/ogf-editor-by-valerok.html"><strong aria-hidden="true">16.12.</strong> Modified OGF Editor</a></li><li class="chapter-item expanded "><a href="../modding-tools/xray-export-tool.html"><strong aria-hidden="true">16.13.</strong> X-Ray Export Tool</a></li><li class="chapter-item expanded "><a href="../modding-tools/universal-x64-level-compilers.html"><strong aria-hidden="true">16.14.</strong> Universal x64 level compilers</a></li><li class="chapter-item expanded "><a href="../modding-tools/xrcompress-by-i-love-kfc.html"><strong aria-hidden="true">16.15.</strong> xrCompress</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Anomaly Modding Book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/Igigog/anomaly-modding-book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/Igigog/anomaly-modding-book/edit/main/src/scripting/callbacks.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="callbacks"><a class="header" href="#callbacks">Callbacks</a></h1>
<hr />
<h2 id="i-introduction"><a class="header" href="#i-introduction">I. INTRODUCTION</a></h2>
<p>Callbacks are a convenient and performant way to execute code when certain events occur. </p>
<p>The idea is: you want a function of yours to be executed when something happens in-game, so you subscribe to a callback, and give it your function so that when the event does happen, it can <em>call it back</em>.</p>
<p>There are many callbacks. Most are defined statically in <code>axr_main.script</code>, but some are added by addons dynamically at runtime.</p>
<p>The &quot;main&quot; callbacks (i.e. the most often used ones) are :</p>
<ol>
<li><code>actor_on_update</code> - A callback called <em>really</em> frequently (almost every frame). In some cases, this is the only way to do what you need, but there is almost always a better option. This callback really isn't performance friendly, so it should be used with <em>extreme</em> caution;</li>
<li><code>save_state</code> (and respectively <code>load_state</code>) - A callback fired when the player saves (and respectively loads) their game. This callback is fired with an argument : <code>m_data</code>, a table in which you can store (and respectively load) any information you want so that it persists in the save game;</li>
<li><code>on_key_press</code> - A callback allowing you to listen to key presses and react accordingly.</li>
</ol>
<p>There are three functions that exists allowing you to manipulate callbacks :</p>
<ul>
<li><code>RegisterScriptCallback(string, function)</code> - used to register one of your functions to a given callback;</li>
<li><code>AddScriptCallback(string)</code> - used to create a new callback at runtime;</li>
<li><code>SendScriptCallback(string, ...)</code> - used to fire a callback with arguments.</li>
</ul>
<p>You must register your functions to callbacks in <code>on_game_start</code>. This function will be called automatically by the game (if it exists in your script) after all scripts are loaded. This is because callbacks need to be created before you can register functions to them. The problem is that, when scripts are still loading, it is possible that not all the dynamic callbacks have been created yet.</p>
<pre><code class="language-lua">function on_game_start()
    RegisterScriptCallback(&quot;actor_on_update&quot;, my_func)
end

function my_func()
    printf(&quot;we are in actor_on_update&quot;)
end
</code></pre>
<h2 id="ii-creating-callbacks"><a class="header" href="#ii-creating-callbacks">II. CREATING CALLBACKS</a></h2>
<p>As previously explained, callbacks can be added dynamically. This means you can create your own callbacks.</p>
<p>To do that, use the <code>AddScriptCallback(string)</code> function (exclusive to Anomaly 1.5.2) to add your new callback. You must do so at the root level of your script, so that other scripts can register callbacks later.</p>
<p><strong>Important :</strong> Callback names have a risk of collision, so it is <strong>highly</strong> recommended you prefix/suffix your callbacks with a unique identifier (like a codename for your addon, or even your nickname - anything that can guarantee no-one else will name their callback the same).</p>
<pre><code class="language-lua">AddScriptCallback(&quot;modding_book_something_happened&quot;)
</code></pre>
<p>Once you have created your callback, you can fire it whenever you want using <code>SendScriptCallback(string, ...)</code>. You must specify the callback's name, but after this, you can pass as many arguments as you want. They will be transited to the functions listening for that callback.</p>
<p>In the following example, we will create a callback that fires when the key <strong>F</strong> is pressed. To make the example more descriptive, it will be split in two files.</p>
<p><strong>File :</strong> <code>gamedata\scripts\script_a.script</code></p>
<pre><code class="language-lua">-- A counter of how many times the player has paid respects
local respects_counter = 0

-- Create the new callback
AddScriptCallback(&quot;modding_book_on_pay_respects&quot;)

-- Register callbacks
function on_game_start()
    RegisterScriptCallback(&quot;on_key_press&quot;, some_key_was_press)
end

-- Function called when a key is pressed
function some_key_was_press(dik)
    -- If the key that was pressed is F
    if dik == DIK_keys.DIK_F then
        -- Increase the counter
        respects_counter = respects_counter + 1
        -- Send the newly created callback with the current value of the counter
        SendScriptCallback(&quot;modding_book_on_pay_respects&quot;, respects_counter)
    end
end
</code></pre>
<p><strong>File :</strong> <code>gamedata\scripts\script_b.script</code></p>
<pre><code class="language-lua">-- Register callbacks
function on_game_start()
    RegisterScriptCallback(&quot;modding_book_on_pay_respects&quot;, is_paying_respects)
end

-- Function called when the player pays respects
function is_paying_respects(respects_count)
    -- print some message in the console showing how many times the player has paid respects
    printf(&quot;player has paid respects &quot; .. respects_count .. &quot; times&quot;)
end
</code></pre>
<h2 id="iii-callbacks-list"><a class="header" href="#iii-callbacks-list">III. CALLBACKS LIST</a></h2>
<p>The following is a non-exhaustive list of callbacks available in Anomaly 1.5.2. </p>
<p>Technically, this should cover all the callbacks available in vanilla, but remember that addons (like the modded exes) can add additional callbacks too.</p>
<pre><code>Player :
* on_before_level_changing                 Params: ()
* on_level_changing                        Params: ()
* actor_on_before_death                    Params: (&lt;number&gt;,&lt;table&gt;)
* actor_on_net_destroy                     Params: (&lt;binder&gt;)
* actor_on_first_update                    Params: (&lt;binder&gt;,&lt;?&gt;)
* actor_on_update                          Params: (&lt;binder&gt;,&lt;?&gt;)
* actor_on_weapon_fired                    Params: (&lt;game_object&gt;,&lt;game_object&gt;,&lt;number&gt;,&lt;number&gt;,&lt;number&gt;,&lt;number&gt;)
* actor_on_weapon_jammed                   Params: (&lt;game_object&gt;)
* actor_on_weapon_no_ammo                  Params: (&lt;game_object&gt;,&lt;number&gt;)
* actor_on_weapon_lower                    Params: (&lt;game_object&gt;)
* actor_on_weapon_raise                    Params: (&lt;game_object&gt;)
* actor_on_weapon_reload                   Params: (&lt;game_object&gt;,&lt;number&gt;)
* actor_on_weapon_zoom_in                  Params: (&lt;game_object&gt;)
* actor_on_weapon_zoom_out                 Params: (&lt;game_object&gt;)
* actor_on_item_take                       Params: (&lt;game_object&gt;)
* actor_on_item_take_from_box              Params: (&lt;game_object&gt;,&lt;game_object&gt;)
* actor_on_item_put_in_box                 Params: (&lt;game_object&gt;,&lt;game_object&gt;)
* actor_on_item_drop                       Params: (&lt;game_object&gt;)
* actor_on_item_use                        Params: (&lt;game_object&gt;,&lt;string&gt;)
* actor_on_item_before_use                 Params: (&lt;game_object&gt;,&lt;table&gt;)
* actor_on_item_before_pickup              Params: (&lt;game_object&gt;,&lt;table&gt;)
* actor_item_to_belt                       Params: (&lt;game_object&gt;)
* actor_item_to_ruck                       Params: (&lt;game_object&gt;)
* actor_item_to_slot                       Params: (&lt;game_object&gt;)
* actor_on_trade                           Params: (&lt;game_object&gt;,&lt;?&gt;,&lt;number&gt;)
* actor_on_init                            Params: (&lt;binder&gt;)
* actor_on_reinit                          Params: (&lt;binder&gt;)
* actor_on_info_callback                   Params: (&lt;game_object&gt;,&lt;number&gt;)
* actor_on_hit_callback                    Params: (&lt;game_object&gt;,&lt;number&gt;,&lt;vector&gt;,&lt;game_object&gt;,&lt;number&gt;)
* actor_on_attach_vehicle                  Params: (&lt;game_object&gt;)
* actor_on_detach_vehicle                  Params: (&lt;game_object&gt;)
* actor_on_use_vehicle                     Params: (&lt;game_object&gt;)
* actor_on_hud_animation_play              Params: (&lt;table&gt;,&lt;game_object&gt;)
* actor_on_hud_animation_end               Params: (&lt;game_object&gt;,&lt;string&gt;,&lt;?&gt;,&lt;?&gt;,&lt;number&gt;)
* actor_on_hud_animation_mark              Params: (&lt;number&gt;,&lt;string&gt;)
* actor_on_sleep                           Params: (&lt;number&gt;)
* actor_on_foot_step                       Params: (&lt;game_object&gt;,&lt;number&gt;,&lt;?&gt;,&lt;?&gt;,&lt;?&gt;)
* actor_on_interaction                     Params: (&lt;string&gt;,&lt;game_object&gt;,&lt;string&gt;)
* actor_on_before_hit                      Params: (&lt;game_object&gt;,&lt;SHit&gt;,&lt;number&gt;,&lt;table&gt;)
* actor_on_before_hit_belt                 Params: (&lt;table&gt;,&lt;number&gt;,&lt;number&gt;)
* actor_on_weapon_before_fire              Params: (&lt;table&gt;)
* actor_on_feeling_anomaly                 Params: (&lt;game_object&gt;,&lt;table&gt;)
* actor_on_leave_dialog                    Params: (&lt;number&gt;)
* actor_on_stash_create                    Params: (&lt;table&gt;)
* actor_on_stash_remove                    Params: (&lt;table&gt;)
* actor_on_frequency_change                Params: (&lt;number&gt;,&lt;number&gt;)
* actor_on_achievement_earned              Params: (&lt;string&gt;,&lt;string&gt;)
* actor_on_movement_changed                Params: (&lt;number&gt;)
* actor_on_footstep                        Params: (&lt;string&gt;,&lt;number&gt;,&lt;boolean&gt;,&lt;table&gt;)
* actor_on_jump                            Params: ()
* actor_on_land                            Params: (&lt;number&gt;)

NPCs :
* npc_on_use                               Params: (&lt;game_object&gt;,&lt;game_object&gt;)
* npc_on_choose_weapon                     Params: (&lt;game_object&gt;,&lt;game_object&gt;,&lt;table&gt;)
* npc_on_item_take                         Params: (&lt;game_object&gt;,&lt;game_object&gt;)
* npc_on_item_take_from_box                Params: (&lt;game_object&gt;,&lt;game_object&gt;,&lt;game_object&gt;)
* npc_on_item_drop                         Params: (&lt;game_object&gt;,&lt;game_object&gt;)
* npc_on_net_spawn                         Params: (&lt;game_object&gt;,&lt;server_object&gt;)
* npc_on_net_destroy                       Params: (&lt;game_object&gt;)
* npc_on_update                            Params: (&lt;game_object&gt;,&lt;table&gt;)
* npc_on_before_hit                        Params: (&lt;game_object&gt;,&lt;SHit&gt;,&lt;number&gt;,&lt;table&gt;)
* npc_on_hit_callback                      Params: (&lt;game_object&gt;,&lt;number&gt;,&lt;vector&gt;,&lt;game_object&gt;,&lt;number&gt;)
* npc_on_death_callback                    Params: (&lt;game_object&gt;,&lt;game_object&gt;)
* npc_on_fighting_actor                    Params: (&lt;game_object&gt;)
* npc_on_weapon_strapped                   Params: (&lt;game_object&gt;,&lt;game_object&gt;)
* npc_on_weapon_unstrapped                 Params: (&lt;game_object&gt;,&lt;game_object&gt;)
* npc_on_weapon_drop                       Params: (&lt;game_object&gt;,&lt;game_object&gt;)
* npc_on_hear_callback                     Params: (&lt;game_object&gt;,&lt;number&gt;,&lt;?&gt;,&lt;number&gt;,&lt;number&gt;,&lt;vector&gt;)
* npc_on_get_all_from_corpse               Params: (&lt;game_object&gt;,&lt;game_object&gt;,&lt;game_object&gt;,&lt;boolean&gt;)
* npc_on_eval_danger                       Params: (&lt;game_object&gt;,&lt;table&gt;)
* anomaly_on_before_activate               Params: (&lt;game_object&gt;,&lt;game_object&gt;)

Mutants :
* monster_on_update                        Params: (&lt;game_object&gt;,&lt;table&gt;)
* monster_on_before_hit                    Params: (&lt;game_object&gt;,&lt;SHit&gt;,&lt;number&gt;,&lt;table&gt;)
* monster_on_hit_callback                  Params: (&lt;game_object&gt;,&lt;number&gt;,&lt;vector&gt;,&lt;game_object&gt;,&lt;number&gt;)
* monster_on_net_spawn                     Params: (&lt;game_object&gt;,&lt;server_object&gt;)
* monster_on_net_destroy                   Params: (&lt;game_object&gt;)
* monster_on_death_callback                Params: (&lt;game_object&gt;,&lt;game_object&gt;)
* monster_on_actor_use_callback            Params: (&lt;game_object&gt;,&lt;game_object&gt;)
* monster_on_loot_init                     Params: (&lt;game_object&gt;,&lt;table&gt;)
* burer_on_before_weapon_drop              Params: (&lt;game_object&gt;,&lt;game_object&gt;)

Physical objects :
* physic_object_on_hit_callback            Params: (&lt;game_object&gt;,&lt;number&gt;,&lt;vector&gt;,&lt;game_object&gt;,&lt;number&gt;)
* physic_object_on_use_callback            Params: (&lt;game_object&gt;,&lt;game_object&gt;)

Vehicles :
* heli_on_hit_callback                     Params: (&lt;game_object&gt;,&lt;number&gt;,&lt;nil&gt;,&lt;game_object&gt;,&lt;nil&gt;)
* vehicle_on_death_callback                Params: (&lt;number&gt;)

Squads :
* squad_on_npc_creation                    Params: (&lt;server_object&gt;,&lt;server_object&gt;,&lt;server_object&gt;)
* squad_on_enter_smart                     Params: (&lt;server_object&gt;,&lt;server_object&gt;)
* squad_on_leave_smart                     Params: (&lt;server_object&gt;,&lt;server_object&gt;)
* squad_on_npc_death                       Params: (&lt;server_object&gt;,&lt;server_object&gt;,&lt;server_object&gt;)
* squad_on_update                          Params: (&lt;server_object&gt;)
* squad_on_first_update                    Params: (&lt;server_object&gt;)
* squad_on_add_npc                         Params: (&lt;server_object&gt;,&lt;server_object&gt;,&lt;string&gt;,&lt;vector&gt;,&lt;number&gt;,&lt;number&gt;)

WARNING!
the following 2 callbacks will ALWAYS fire on level change/loaded save because the old data isn't saved for compatibility purpose
it's up to the user to check for the case in which old level name/old game vertex is nil in their code if they want to use this

* squad_on_after_game_vertex_change        Params: (&lt;server_object&gt;,&lt;number&gt;,&lt;number&gt;,&lt;boolean&gt;)
* squad_on_after_level_change              Params: (&lt;server_object&gt;,&lt;string&gt;,&lt;string&gt;)

Smart terrains :
* smart_terrain_on_update                  Params: (&lt;server_object&gt;)
* on_try_respawn                           Params: (&lt;server_object&gt;,&lt;table&gt;)

Server objects :
* server_entity_on_register                Params: (&lt;server_object&gt;,&lt;string&gt;)
* server_entity_on_unregister              Params: (&lt;server_object&gt;,&lt;string&gt;)
* fill_start_position                      Params: ()
* se_stalker_on_spawn                      Params: (&lt;server_object&gt;)
* se_actor_on_STATE_Write                  Params: (&lt;server_object&gt;)
* se_actor_on_STATE_Read                   Params: (&lt;server_object&gt;)

GUI :
* ActorMenu_on_before_init_mode            Params: (&lt;string&gt;,&lt;table&gt;,&lt;game_object&gt;)
* ActorMenu_on_mode_changed                Params: (&lt;number&gt;,&lt;number&gt;)
* ActorMenu_on_item_drag_drop              Params: (&lt;game_object&gt;,&lt;game_object&gt;,&lt;number&gt;,&lt;number&gt;)
* ActorMenu_on_item_focus_receive          Params: (&lt;game_object&gt;)
* ActorMenu_on_item_focus_lost             Params: (&lt;game_object&gt;)
* ActorMenu_on_item_before_move            Params: (&lt;table&gt;,&lt;number&gt;,&lt;game_object&gt;,&lt;string&gt;,,&lt;number&gt;)
* ActorMenu_on_item_after_move             Params: (&lt;number&gt;,&lt;game_object&gt;,&lt;string&gt;,,&lt;number&gt;)
* ActorMenu_on_trade_started               Params: ()
* ActorMenu_on_trade_closed                Params: ()

* GUI_on_show                              Params: (&lt;string&gt;,&lt;string&gt;)
* GUI_on_hide                              Params: (&lt;string&gt;,&lt;string&gt;)

* map_spot_menu_add_property               Params: (&lt;CUIWindow&gt;,&lt;number&gt;,&lt;string&gt;,&lt;string&gt;)
* map_spot_menu_property_clicked           Params: (&lt;CUIWindow&gt;,&lt;number&gt;,&lt;string&gt;,&lt;string&gt;)

* main_menu_on_keyboard                    Params: (&lt;number&gt;,&lt;number&gt;,&lt;CUIScriptWnd&gt;,&lt;boolean&gt;)
* main_menu_on_init                        Params: (&lt;CUIScriptWnd&gt;)
* main_menu_on_quit                        Params: (&lt;CUIScriptWnd&gt;)

* on_screen_resolution_changed             Params: ()

Technical :
* on_game_load                             Params: (&lt;binder&gt;)
* on_key_press                             Params: (&lt;number&gt;)
* on_key_release                           Params: (&lt;number&gt;)
* on_key_hold                              Params: (&lt;number&gt;)
* on_before_key_press                      Params: (&lt;number&gt;,&lt;number&gt;,&lt;boolean&gt;,&lt;table&gt;)
* on_option_change                         Params: ()
* on_localization_change                   Params: ()
* on_console_execute                       Params: (&lt;string&gt;,&lt;string&gt;,&lt;string&gt;,...)
* on_before_save_input                     Params: (&lt;number&gt;,&lt;number&gt;,&lt;table&gt;)
* on_before_load_input                     Params: (&lt;number&gt;,&lt;number&gt;,&lt;table&gt;)

Files :
* save_state                               Params: (&lt;table&gt;)
* load_state                               Params: (&lt;table&gt;)
* on_pstor_save_all                        Params: (&lt;game_object&gt;,&lt;?&gt;)
* on_pstor_load_all                        Params: (&lt;game_object&gt;,&lt;?&gt;)

Others :
* on_enemy_eval                            Params: (&lt;game_object&gt;,&lt;game_object&gt;,&lt;table&gt;)
* on_before_surge                          Params: (&lt;table&gt;)
* on_before_psi_storm                      Params: (&lt;table&gt;)
* on_get_item_cost                         Params: look at bottom of utils_item.script for details
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../scripting/server_and_game_objects.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../scripting/time_events.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../scripting/server_and_game_objects.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../scripting/time_events.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
